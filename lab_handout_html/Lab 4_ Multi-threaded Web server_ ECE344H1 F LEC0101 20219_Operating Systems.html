<!DOCTYPE html>
<html dir="ltr"   lang="en-CA">
<head>
  <meta charset="utf-8">
  <meta name="sentry-trace" content="e2378d89d9ac4139b61ed23c22d4d372-34c929feb74d406a-0"/>
  <link rel="preload" href="https://du11hjcvx0uqb.cloudfront.net/dist/fonts/lato/extended/Lato-Regular-bd03a2cc27.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="https://du11hjcvx0uqb.cloudfront.net/dist/fonts/lato/extended/Lato-Bold-cccb897485.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="https://du11hjcvx0uqb.cloudfront.net/dist/fonts/lato/extended/Lato-Italic-4eb103b4d1.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="stylesheet" href="https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/no_variables/bundles/fonts-6ee09b0b2f.css" media="screen" />
    <script>if (navigator.userAgent.match(/(MSIE|Trident\/)/)) location.replace('/ie-is-not-supported.html')</script>
  
  <link rel="icon" type="image/x-icon" href="https://du11hjcvx0uqb.cloudfront.net/dist/images/favicon-e10d657a73.ico" />
  <link rel="apple-touch-icon" href="https://du11hjcvx0uqb.cloudfront.net/dist/images/apple-touch-icon-585e5d997d.png" />
  <link rel="stylesheet" href="https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/0976b3638d0604c8fdc3c2118e22f3cf/variables-7dd4b80918af0e0218ec0229e4bd5873.css" media="all" />
  <link rel="stylesheet" href="https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/new_styles_normal_contrast/bundles/common-c5d9e08ec7.css" media="all" />
  <meta name="apple-itunes-app" content="app-id=480883488">
<link rel="manifest" href="/web-app-manifest/manifest.json">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#002a5c">
  <meta name="robots" content="noindex,nofollow" />
  <link rel="stylesheet" href="https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/new_styles_normal_contrast/bundles/wiki_page-bb0c0c1f96.css" media="all" />
<link rel="stylesheet" href="https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/new_styles_normal_contrast/bundles/new_user_tutorials-2950c871dd.css" media="all" />
  <link rel="stylesheet" href="https://instructure-uploads-yul.s3.ca-central-1.amazonaws.com/account_118340000000000001/attachments/434590/uoft-new.css" media="all" />


  <script>
    INST = {"environment":"production","allowMediaComments":true,"kalturaSettings":{"domain":"yul.nv.instructuremedia.com","resource_domain":"yul.nv.instructuremedia.com","rtmp_domain":"yul.rtmp.instructuremedia.com","partner_id":7,"subpartner_id":0,"player_ui_conf":0,"kcw_ui_conf":0,"upload_ui_conf":0,"max_file_size_bytes":534773760,"js_uploader":"yes"},"disableGooglePreviews":true,"logPageViews":true,"editorButtons":[{"name":"YouTube","id":50,"favorite":false,"url":"https://www.edu-apps.org/lti_public_resources/?tool_id=youtube","icon_url":"https://www.edu-apps.org/assets/lti_public_resources/youtube_icon.png","canvas_icon_class":null,"width":560,"height":600,"use_tray":false,"description":"\u003cp\u003eSearch publicly available YouTube videos. A new icon will show up in your course rich editor letting you search YouTube and click to embed videos in your course material.\u003c/p\u003e\n"},{"name":"O365 OneDrive","id":5716,"favorite":true,"url":"https://office365-yul-prod.instructure.com/lti/rce-content-item","icon_url":"https://office365-yul-prod.instructure.com/images/office365_icon.png","canvas_icon_class":null,"width":900,"height":600,"use_tray":false,"description":"\u003cp\u003eAllows you to pull in documents from Office 365 OneDrive to Canvas\u003c/p\u003e\n"},{"name":"Insert a Wiley Resource","id":14754,"favorite":false,"url":"https://lti.education.wiley.com/wpng/api/v1/lti/resourcediscoverytool","icon_url":"https://education.wiley.com/assets/images/wp.svg","canvas_icon_class":null,"width":1160,"height":660,"use_tray":false,"description":"\u003cp\u003eOutcomes-based learning.\u003c/p\u003e\n"},{"name":"Import citations","id":17413,"favorite":false,"url":"https://utoronto.alma.exlibrisgroup.com/lti/v3/launch/01UTORONTO_INST/LMS_CANVAS_1","icon_url":"https://utoronto.alma.exlibrisgroup.com/lti/images/editor-btn.png","canvas_icon_class":null,"width":900,"height":650,"use_tray":false,"description":"\u003cp\u003eLibrary Reading List\u003c/p\u003e\n"}]};
    ENV = {"ASSET_HOST":"https://du11hjcvx0uqb.cloudfront.net","active_brand_config_json_url":"https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/0976b3638d0604c8fdc3c2118e22f3cf/variables-7dd4b80918af0e0218ec0229e4bd5873.json","active_brand_config":{"md5":"0976b3638d0604c8fdc3c2118e22f3cf","variables":{"ic-brand-primary":"#002a5c","ic-brand-global-nav-bgd":"#002a5c","ic-brand-global-nav-menu-item__badge-bgd":"#008ee2","ic-brand-global-nav-logo-bgd":"#002a5c","ic-brand-header-image":"https://instructure-uploads-yul.s3.ca-central-1.amazonaws.com/account_118340000000000001/attachments/113470/tree%20logo.png","ic-brand-watermark-opacity":"1","ic-brand-msapplication-tile-wide":"https://instructure-uploads-yul.s3.ca-central-1.amazonaws.com/account_118340000000000001/attachments/113471/tree%20logo.png","ic-brand-right-sidebar-logo":"https://instructure-uploads-yul.s3.ca-central-1.amazonaws.com/account_118340000000000001/attachments/113518/20171219_Quercus-01.png"},"share":false,"name":null,"created_at":"2023-02-06T13:41:17-05:00","js_overrides":"https://instructure-uploads-yul.s3.ca-central-1.amazonaws.com/account_118340000000000001/attachments/24721051/UT_CustomJS_20210412-PRD-GTM.js","css_overrides":"https://instructure-uploads-yul.s3.ca-central-1.amazonaws.com/account_118340000000000001/attachments/434590/uoft-new.css","mobile_js_overrides":"","mobile_css_overrides":"","parent_md5":null},"confetti_branding_enabled":false,"url_to_what_gets_loaded_inside_the_tinymce_editor_css":["https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/0976b3638d0604c8fdc3c2118e22f3cf/variables-7dd4b80918af0e0218ec0229e4bd5873.css","https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/new_styles_normal_contrast/bundles/what_gets_loaded_inside_the_tinymce_editor-a64c7fe33c.css","https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/no_variables/bundles/fonts-6ee09b0b2f.css"],"url_for_high_contrast_tinymce_editor_css":["https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/default/variables-high_contrast-7dd4b80918af0e0218ec0229e4bd5873.css","https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/new_styles_high_contrast/bundles/what_gets_loaded_inside_the_tinymce_editor-fa0672d544.css","https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/no_variables/bundles/fonts-6ee09b0b2f.css"],"current_user_id":"287772","current_user_global_id":"118340000000287772","current_user_heap_id":"uu-2-2c939087a86180dd981cdb601a812aaabef8de0caa5cb2a53c2a39d778d64303-dsWzekD5khhODOqBAcRfXKcKKo0XpVhgmkX973K4","current_user_roles":["user","student","teacher"],"current_user_is_student":false,"current_user_types":[],"current_user_disabled_inbox":false,"current_user_visited_tabs":null,"discussions_reporting":false,"files_domain":"cluster75.canvas-user-content.com","group_information":null,"DOMAIN_ROOT_ACCOUNT_ID":"118340000000000001","DOMAIN_ROOT_ACCOUNT_UUID":"dsWzekD5khhODOqBAcRfXKcKKo0XpVhgmkX973K4","k12":false,"help_link_name":"Help","help_link_icon":"help","use_high_contrast":false,"auto_show_cc":false,"disable_celebrations":false,"disable_keyboard_shortcuts":false,"LTI_LAUNCH_FRAME_ALLOWANCES":["geolocation *","microphone *","camera *","midi *","encrypted-media *","autoplay *","clipboard-write *","display-capture *"],"DEEP_LINKING_POST_MESSAGE_ORIGIN":"https://q.utoronto.ca","DEEP_LINKING_LOGGING":null,"comment_library_suggestions_enabled":false,"SETTINGS":{"open_registration":false,"collapse_global_nav":false,"release_notes_badge_disabled":false},"FULL_STORY_ENABLED":false,"RAILS_ENVIRONMENT":"Production","IN_PACED_COURSE":false,"SENTRY_FRONTEND":{"dsn":"https://355a1d96717e4038ac25aa852fa79a8f@relay-yul.sentry.insops.net/388","org_slug":"instructure","base_url":"https://sentry.insops.net","normalized_route":"/courses/{course_id}/pages/{id}","errors_sample_rate":"0.0005","traces_sample_rate":"0.0005","url_deny_pattern":"instructure-uploads.*amazonaws.com","revision":"canvas-lms@20231025.250"},"DATA_COLLECTION_ENDPOINT":"https://canvas-frontend-data-yul-prod.inscloudgate.net/submit","DOMAIN_ROOT_ACCOUNT_SFID":"001A000000YLIoa","DIRECT_SHARE_ENABLED":false,"CAN_VIEW_CONTENT_SHARES":true,"FEATURES":{"featured_help_links":true,"lti_platform_storage":true,"calendar_series":true,"account_level_blackout_dates":false,"render_both_to_do_lists":false,"course_paces_redesign":true,"course_paces_for_students":true,"module_publish_menu":true,"explicit_latex_typesetting":false,"dev_key_oidc_alert":true,"media_links_use_attachment_id":false,"permanent_page_links":true,"differentiated_modules":false,"enhanced_course_creation_account_fetching":false,"instui_for_import_page":false,"product_tours":false,"usage_rights_discussion_topics":true,"granular_permissions_manage_users":true,"create_course_subaccount_picker":true,"lti_deep_linking_module_index_menu_modal":true,"lti_multiple_assignment_deep_linking":true,"lti_overwrite_user_url_input_select_content_dialog":true,"buttons_and_icons_root_account":true,"extended_submission_state":false,"scheduled_page_publication":true,"send_usage_metrics":false,"rce_transform_loaded_content":false,"lti_assignment_page_line_items":true,"mobile_offline_mode":false,"react_discussions_post":false,"instui_nav":false,"embedded_release_notes":false,"canvas_k6_theme":false,"new_math_equation_handling":true},"current_user":{"id":"287772","anonymous_id":"661o","display_name":"Yuhe Chen","avatar_image_url":"https://q.utoronto.ca/images/thumbnails/24252802/49w46JOhPyJJXYU3xUiBG9eUG1LciFpubMN3YR4t","html_url":"https://q.utoronto.ca/about/287772","pronouns":null,"avatar_is_fallback":false},"page_view_update_url":"/page_views/12edccdb-808e-4cd6-a7b1-97ae3f8b1593?page_view_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpIjoiMTJlZGNjZGItODA4ZS00Y2Q2LWE3YjEtOTdhZTNmOGIxNTkzIiwidSI6MTE4MzQwMDAwMDAwMjg3NzcyLCJjIjoiMjAyMy0xMC0yOVQwNDowNjoyNi4wMloifQ.mex2FWlOuofYvgFnUHEDZqqlD0Br_jvf93z9y0c7e28","context_asset_string":"course_238659","ping_url":"https://q.utoronto.ca/api/v1/courses/238659/ping","TIMEZONE":"America/New_York","CONTEXT_TIMEZONE":"America/New_York","LOCALES":["en-CA","en"],"BIGEASY_LOCALE":"en_CA","FULLCALENDAR_LOCALE":"en-ca","MOMENT_LOCALE":"en-ca","rce_auto_save_max_age_ms":86400000,"K5_USER":false,"USE_CLASSIC_FONT":false,"K5_HOMEROOM_COURSE":false,"K5_SUBJECT_COURSE":false,"LOCALE_TRANSLATION_FILE":"/dist/javascripts/translations/en-CA-6065eb10af.json","ACCOUNT_ID":"28","user_cache_key":"a0ppbnI1SDJUVkVlOGdJSHdtWDh2VExxOXVGTlE5TEpVRjZKempwMHZ5Zlc9\nO1twLTA/OntQXz1IVXBncmFxZTtuamFsa2hwdm9pdWxraW1tYXFld2c=\n","WIKI_RIGHTS":{"read":true},"PAGE_RIGHTS":{"read":true},"DEFAULT_EDITING_ROLES":"teachers","WIKI_PAGES_PATH":"/courses/238659/pages","WIKI_PAGE":{"title":"Lab 4: Multi-threaded Web server","created_at":"2021-08-12T10:16:29-04:00","url":"lab-4-multi-threaded-web-server","editing_roles":"teachers","page_id":"862335","last_edited_by":{"id":"64820","anonymous_id":"1e0k","display_name":"Michael Stumm","avatar_image_url":"https://q.utoronto.ca/images/messages/avatar-50.png","html_url":"https://q.utoronto.ca/courses/238659/users/64820","pronouns":null},"published":true,"hide_from_students":false,"front_page":false,"html_url":"https://q.utoronto.ca/courses/238659/pages/lab-4-multi-threaded-web-server","todo_date":null,"publish_at":null,"updated_at":"2021-10-28T10:26:38-04:00","locked_for_user":false,"body":"\u003cp\u003e\u003cstrong\u003eQuick Links: \u0026nbsp; \u003c/strong\u003e\u0026nbsp;\u003ca title=\"Syllabus\" href=\"https://q.utoronto.ca/courses/238659/assignments/syllabus\"\u003eHome\u003c/a\u003e \u0026nbsp;\u0026nbsp; \u0026nbsp;\u0026nbsp;\u003ca class=\"instructure_file_link inline_disabled\" href=\"https://q.utoronto.ca/courses/238659/pages/lecture-material\" data-api-endpoint=\"https://q.utoronto.ca/api/v1/courses/238659/pages/lecture-material\" data-api-returntype=\"Page\"\u003eLecture material\u003c/a\u003e \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003ca title=\"Lab Assignments\" href=\"https://q.utoronto.ca/courses/238659/pages/lab-assignments\" data-api-endpoint=\"https://q.utoronto.ca/api/v1/courses/238659/pages/lab-assignments\" data-api-returntype=\"Page\"\u003eLab assignments\u003c/a\u003e \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003ca class=\"instructure_file_link inline_disabled external\" href=\"https://piazza.com/utoronto.ca/winter2021/ece353/home\" target=\"_blank\"\u003e \u003cspan\u003ePiazza Discussion\u003c/span\u003e \u003cspan class=\"screenreader-only\"\u003e\u0026nbsp;(Links to an external site.)\u003c/span\u003e \u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch4\u003e\u003cstrong\u003eDue Date: November 19 11:59 EST\u003c/strong\u003e\u003c/h4\u003e\n\u003cp\u003e\u0026nbsp;\u003c/p\u003e\n\u003cp\u003e\u0026nbsp;\u003c/p\u003e\n\u003cp\u003eIn this lab, you will be developing a multi-threaded web server, and evaluating its performance. To simplify the project, we are providing you with the code for a very basic web server. This basic web server operates with only a single thread. It will be your job to make the web server multi-threaded so that it is more efficient.\u003c/p\u003e\n\u003ch2\u003eHTTP Background\u003c/h2\u003e\n\u003cp\u003eIn this section, we provide a brief overview of how a simple web server works and the HTTP protocol. Our goal in providing you with a basic web server is that you should be shielded from all of the details of network connections and the HTTP protocol. The code that we give you already handles everything that we describe in this section. If you are really interested in the full details of the HTTP protocol, you can read the \u003ca href=\"http://tools.ietf.org/html/rfc7230\"\u003eHTTP specification\u003c/a\u003e, but we do not recommend it for this project.\u003c/p\u003e\n\u003cp\u003eMost web browsers and web servers interact using a text-based protocol called HTTP (Hypertext Transfer Protocol). A web browser opens an Internet connection to a web server and requests some content with HTTP. The web server responds with the requested content and closes the connection. The browser reads the content and displays it on the screen.\u003c/p\u003e\n\u003cp\u003eEach piece of content on the server is associated with a file. If a client requests a specific disk file, then this is referred to as static content. If a client requests an executable file to be run and its output returned, then this is called dynamic content. In this lab, our web server will only handle static content.\u003c/p\u003e\n\u003cp\u003eEach file requested from the server has a unique name known as a URL (Universal Resource Locator). For example, the URL \u003ckbd\u003ehttp://www.eecg.toronto.edu:80/Welcome.html\u003c/kbd\u003e identifies an HTML file called “index.html” on Internet host “www.eecg.toronto.edu” that is managed by a web server listening on port 80. The port number is optional and defaults to the well-known HTTP port of 80.\u003c/p\u003e\n\u003cp\u003eAn HTTP request (from the web browser to the server) consists of a request line, followed by zero or more request header lines, and finally an empty text line. A request line has the form: \u003ckbd\u003emethod uri version\u003c/kbd\u003e. The \u003ckbd\u003emethod\u003c/kbd\u003e is usually GET (but may be other things, such as POST, OPTIONS, or PUT). The \u003ckbd\u003euri\u003c/kbd\u003e is the file name and any optional arguments (for dynamic content). The \u003ckbd\u003eversion\u003c/kbd\u003e indicates the version of the HTTP protocol that the web client is using (e.g., HTTP/1.0 or HTTP/1.1). The request headers define various parameters of the request such as the type of browser (user agent) making the request. Each header is a colon-separated name-value pair in clear-text string format. The request line and other header fields must each end with \u0026lt;CR\u0026gt;\u0026lt;LF\u0026gt; (that is, a carriage return character followed by a line feed character). The empty line must consist of only \u0026lt;CR\u0026gt;\u0026lt;LF\u0026gt;.\u003c/p\u003e\n\u003cp\u003eAn HTTP response (from the server to the browser) is similar; it consists of a response line, zero or more response header lines, an empty text line, and finally the interesting part, the response body. A response line has the form \u003ckbd\u003eversion status message\u003c/kbd\u003e. The \u003ckbd\u003estatus\u003c/kbd\u003e is a three-digit positive integer that indicates the state of the request; some common states and the corresponding messages are 200 for \u003cstrong\u003eOK\u003c/strong\u003e, 403 for \u003cstrong\u003eForbidden\u003c/strong\u003e, and 404 for \u003cstrong\u003eNot found\u003c/strong\u003e. Two important lines in the response header are \u003cstrong\u003eContent-Type\u003c/strong\u003e, which tells the client the MIME type of the content in the response body (e.g., html or gif) and \u003cstrong\u003eContent-Length\u003c/strong\u003e, which indicates the size of the response body in bytes. The server can add any custom header line.\u003c/p\u003e\n\u003cp\u003eAgain, you don't need to know this information about HTTP unless you want to understand the details of the code we have given you. \u003cem\u003eYou will not need to modify any of the procedures in the web server that deal with the HTTP protocol or network connections.\u003c/em\u003e\u003c/p\u003e\n\u003ch2\u003eSetup\u003c/h2\u003e\n\u003cp\u003eAdd the source files for this lab, available in \u003ckbd\u003ewebserver.tar\u003c/kbd\u003e, to your repository, and run \u003ckbd\u003emake\u003c/kbd\u003e in the newly created \u003ckbd\u003ewebserver\u003c/kbd\u003e directory.\u003c/p\u003e\n\u003cpre\u003ecd ~/ece344\ntar -xf /cad2/ece344f/src/webserver.tar\ngit status # should say that \"webserver/\" directory is untracked\ngit add webserver\ngit commit -m \"Initial code for Lab 4\"\ngit tag Lab4-start\ncd webserver\nmake\n\u003c/pre\u003e\n\u003cp\u003eThe make command will create four executables called \u003ckbd\u003eserver\u003c/kbd\u003e, \u003ckbd\u003eclient_simple\u003c/kbd\u003e, \u003ckbd\u003eclient\u003c/kbd\u003e and \u003ckbd\u003efileset\u003c/kbd\u003e. We will describe the \u003ckbd\u003eserver\u003c/kbd\u003e program here, and then describe the other three programs later.\u003c/p\u003e\n\u003cp\u003eThe \u003ckbd\u003eserver\u003c/kbd\u003e program we have provided you is a basic, single-threaded server. When you run it, you need to specify the port number that it will listen on. You should specify port numbers that are greater than about 2000 to avoid active ports. When you then connect your web browser to this server, make sure that you specify this same port. For example, assume that you are running on \u003ckbd\u003eug205.eecg\u003c/kbd\u003e and use port number 2003. Copy your favorite HTML file, called \u003ckbd\u003efavorite.html\u003c/kbd\u003e to the \u003ckbd\u003ewebserver\u003c/kbd\u003e directory. Then, you can view this file from a web browser (running on the same or a different machine), by using the url: \u003ckbd\u003eug205.eecg.toronto.edu:2003/favorite.html\u003c/kbd\u003e. Note that you will need to run the web browser on one of the lab machines.\u003c/p\u003e\n\u003cp\u003eWe are providing you with a bare bones, minimal web server. For example, the web server does not handle any HTTP requests other than GET. Also, it does not support running CGI programs. This web server is also not very robust; for example, if a web client closes its connection to the server, it may crash. We do not expect you to fix these problems!\u003c/p\u003e\n\u003cp\u003eThe helper functions are simply wrappers for system calls that check the error codes of the system calls and immediately terminate if an error occurs. One should \u003cem\u003ealways check error codes!\u0026nbsp;\u003c/em\u003eHowever, many programmer don't like to do it because they believe that it makes their code less readable; the solution is to use these wrapper functions.\u003c/p\u003e\n\u003cp\u003e\u003ca name=\"multithreaded\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"multi-threaded\"\u003eMulti-threaded Web Server\u003c/h2\u003e\n\u003cp\u003eThe basic web server that we have provided has a single thread of control. Single-threaded web servers suffer from a fundamental performance problem in that only a single HTTP request can be serviced at a time. Thus, every other client that is accessing this web server must wait until the current HTTP request has finished. This is a problem for two reasons. First, if your server is running on a multi-core processor or a multi-processor machine, a single thread can only use a single processor core, under-utilizing the machine. Second, if the current HTTP request is for a file that is resident only on disk (i.e., it is not in memory), then the request will be delayed until the file can be fetched from disk, during which time all the cores will remain completely idle.\u003c/p\u003e\n\u003cp\u003eIn this lab, you will address the limitations of the basic web server by making it multi-threaded. The simplest approach to building a multi-threaded server is to spawn a new thread for serving each new HTTP request. The OS will then schedule these threads according to its own policy. The advantage of creating these threads is that short requests will not need to wait for a long request to complete. Further, when one thread is blocked (i.e., waiting for disk I/O to finish to fetch the file) the other threads can continue to handle other requests. However, the drawback of the one-thread-per-request approach is that the web server pays the overhead of creating a new thread on every request.\u003c/p\u003e\n\u003cp\u003eTherefore, the generally preferred approach for designing a multi-threaded server is to create a \u003cstrong\u003efixed-size pool\u003c/strong\u003e of worker threads when the web server is first started. With this pool-of-threads approach, each thread is blocked until there is an HTTP request for it to handle. Therefore, if there are more worker threads than active requests, then some of the threads will be blocked, waiting for new HTTP requests to arrive. If there are more requests than worker threads, then those requests will need to be buffered until there is a ready thread. In this lab, you will implement this web server design.\u003c/p\u003e\n\u003cp\u003eIn your implementation, you must have a master thread that begins by creating a pool of worker threads, the number of which is specified on the command line. Your master thread is then responsible for accepting new HTTP connections over the network and placing the socket descriptor for this connection into a fixed-size request buffer. The number of elements in the buffer is also specified on the command line. Note that the web server we have provided uses a single thread that accepts a connection, and then immediately handles the connection by reading the request and sending the response. In your web server, this (master) thread should place the connection descriptor into the fixed-size buffer and return to accepting more connections, i.e., it should not read the request or perform any request processing.\u003c/p\u003e\n\u003cp\u003eEach worker thread wakes up when there is an HTTP request in the queue. Once the worker thread wakes, it processes an HTTP request by performing a read on the network descriptor, obtains the specified content by reading the file that is requested, and then returns the content to the client by writing to the descriptor. The worker thread then waits for another HTTP request.\u003c/p\u003e\n\u003cp\u003eWhen there are multiple HTTP requests available, the requests are handled in FIFO order. Hence, when a worker thread wakes up, it handles the first request (i.e., the oldest request) in the buffer. Note that the HTTP requests will not necessarily finish in FIFO order. The order in which the requests complete will depend upon how long it takes to process the request and also on how the OS schedules the active threads.\u003c/p\u003e\n\u003cp\u003eNote that the master thread and the worker threads are in a producer-consumer relationship and require that their accesses to the shared buffer be synchronized. Specifically, the master thread must block and wait if the buffer is full. A worker thread must wait if the buffer is empty.\u003c/p\u003e\n\u003ch2 id=\"web-server\"\u003eRunning the Web Server\u003c/h2\u003e\n\u003cp\u003eThe web server we provide should be invoked as follows:\u003c/p\u003e\n\u003cpre\u003e  ./server port nr_threads max_requests max_cache_size\n\u003c/pre\u003e\n\u003cp\u003eThe command line arguments are:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eport:\u003c/strong\u003e the port number that the web server should listen on.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003enr_threads:\u003c/strong\u003e the number of worker threads that should be created within the web server. This number must be non-negative (\u0026gt;= 0). When it is zero (zero worker threads), the basic web server that we have provided is run. When it is positive, then your implementation should create worker threads.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003emax_requests:\u003c/strong\u003e the number of request connections that can be accepted at one time. This parameter specifies the size of the fixed-size buffer, and it applies only for the multi-threaded web server. It must be a positive integer. Note that it is not an error for more or less threads to be created than the buffer size.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003emax_cache_size:\u003c/strong\u003e we will use this parameter in the next lab. For the moment, you can run the server with a value of 0 for this parameter.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eYou can run the initial web server that we have provided on port 5003 as follows:\u003c/p\u003e\n\u003cpre\u003e  ./server 5003 0 0 0\n\u003c/pre\u003e\n\u003cp\u003eAfter you have implemented the multi-threaded web server, you could run your server as follows:\u003c/p\u003e\n\u003cpre\u003e  ./server 5003 8 16 0\n\u003c/pre\u003e\n\u003cp\u003eThen your server should create 8 worker threads for handling HTTP requests, and allocate 16 buffers so that up to a maximum of 16 connections can be waiting to be served. Note that a request that is being served by a worker thread should no longer be in the request queue. For your lab, you should choose some random port number between 1025-65535 for testing. If you use a port number that some other student is already using, you will an \"Address already in use\" error. Then use a different port number. Avoid using 5003, since it is likely that someone else is not following these instructions!\u003c/p\u003e\n\u003ch2 id=\"client\"\u003eRunning the Client\u003c/h2\u003e\n\u003cp\u003eWe have provided a simple browser client program called \u003ckbd\u003eclient_simple\u003c/kbd\u003e. Go ahead and use it as follows:\u003c/p\u003e\n\u003cpre\u003e  ./client_simple www.ece.toronto.edu 80 /index.html\n\u003c/pre\u003e\n\u003cp\u003eThe client simple program will allow you to fetch a single file from any web server. If you wish to use it for your own web server, you can use it as follows:\u003c/p\u003e\n\u003cpre\u003e  ./client_simple localhost 5003 /favorite.html\n\u003c/pre\u003e\n\u003cp\u003eHere \u003ckbd\u003eclient_simple\u003c/kbd\u003e is run on the same machine as your server and hence it contacts the \u003ckbd\u003elocalhost\u003c/kbd\u003e machine. The port on which your server is assumed to be listening is 5003. The \u003ckbd\u003efavorite.html\u003c/kbd\u003e file should lie in the \u003ckbd\u003ewebserver\u003c/kbd\u003e directory.\u003c/p\u003e\n\u003cp\u003eThe \u003ckbd\u003eclient_simple\u003c/kbd\u003e program can be used test your web server. But it is hard to measure the performance of your web server with this simple program. Instead, we have provided you the \u003ckbd\u003eclient\u003c/kbd\u003e program for stress testing your web server. To run the \u003ckbd\u003eclient\u003c/kbd\u003e program, you will first need to generate a set of files that will be requested from the server. To do so, run the following command:\u003c/p\u003e\n\u003cpre\u003e  ./fileset\n\u003c/pre\u003e\n\u003cp\u003eThe \u003ckbd\u003efileset\u003c/kbd\u003e program generates a set of files in a directory. By default, it generates 256 files in the \u003ckbd\u003efileset_dir\u003c/kbd\u003e directory. The mean size for each file is 3 blocks, or 12 KB. It also generates an index file called \u003ckbd\u003efileset_dir.idx\u003c/kbd\u003e. This index file lists the total number of files in the file set in the first line. After that, it lists one file per line. For each file, it lists the name of the file, a simple checksum for the file, and the size of the file. You can find out the parameters of the \u003ckbd\u003efileset\u003c/kbd\u003e program by running \u003ckbd\u003efileset\u003c/kbd\u003e with the \u003ckbd\u003e--help\u003c/kbd\u003e option.\u003c/p\u003e\n\u003cpre\u003e  ./fileset --help\n\u003c/pre\u003e\n\u003cp\u003eThe file sizes generated by the \u003ckbd\u003efileset\u003c/kbd\u003e program are distributed according to a \u003ca href=\"http://en.wikipedia.org/wiki/Pareto_distribution\"\u003ePareto distribution\u003c/a\u003e, which is a a \u003ca href=\"http://en.wikipedia.org/wiki/Long_tail\"\u003elong tail\u003c/a\u003e distribution. For the \u003ckbd\u003efileset\u003c/kbd\u003e program, this means that while most files are relatively small and close to the mean file size, there will be some files with very large sizes. These file size distributions are often found in practice. For example, most of the files in a system will be small but a few files are very large (e.g., video files, virtual machine images, etc.).\u003c/p\u003e\n\u003cp\u003eAfter generating the fileset, you can run the \u003ckbd\u003eclient\u003c/kbd\u003e program as follows:\u003c/p\u003e\n\u003cpre\u003e  ./client [-t] host port nr_times nr_threads fileset_dir.idx\n\u003c/pre\u003e\n\u003cp\u003eThe \u003ckbd\u003ehost\u003c/kbd\u003e argument is the name of the host on which the server is running. The \u003ckbd\u003eport\u003c/kbd\u003e argument should be the same as the port at which the web server is listening for connections. We have provided you a multi-threaded \u003ckbd\u003eclient\u003c/kbd\u003e program, that runs with \u003ckbd\u003enr_threads\u003c/kbd\u003e. Each thread runs a loop \u003ckbd\u003enr_times\u003c/kbd\u003e, requesting a file from the file set, once per loop. So the total number of file requests made by the client is \u003ckbd\u003enr_times * nr_threads\u003c/kbd\u003e. To request one file, make both these arguments have the value of 1. The \u003ckbd\u003efileset_dir.idx\u003c/kbd\u003e argument is the index file generated by the \u003ckbd\u003efileset\u003c/kbd\u003e program that provides the file set information.\u003c/p\u003e\n\u003cp\u003eThe client requests different files from the fileset randomly using a \u003ca href=\"http://en.wikipedia.org/wiki/Discrete_uniform_distribution\"\u003euniform distribution\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eWhen the \u003ckbd\u003eclient\u003c/kbd\u003e program is run, it will output the contents of the files in the file set to the terminal. This will be a lot of output, and the output has (you guessed that) random printable ascii characters. You can avoid seeing this output by piping the output to \u003ckbd\u003e/dev/null\u003c/kbd\u003e as follows:\u003c/p\u003e\n\u003cpre\u003e  ./client host port nr_times nr_threads fileset_dir.idx \u0026gt; /dev/null\n\u003c/pre\u003e\n\u003cp\u003eAlternatively, you can use the client's \u003ckbd\u003e[-t]\u003c/kbd\u003e option, which does not print the file output. Instead, it outputs in a single line, the time it took to run the client. This will allow you to time the client run.\u003c/p\u003e\n\u003cp\u003eHow do we know that the server is working correctly? The server generates the file size and the file checksum in the response header lines, as shown in an example header below:\u003c/p\u003e\n\u003cpre\u003eHeader: HTTP/1.0 200 OK\nHeader: Server: OS Web Server\nHeader: Content-Type: text/plain\nHeader: Content-Length: 619\nHeader: Content-Csum: 49888\n\u003c/pre\u003e\n\u003cp\u003eRecall the index file generated by the \u003ckbd\u003efileset\u003c/kbd\u003e program. This file also has the file length and checksum fields for each file. The client performs two types of checks. First, it checks that the length and the checksum fields in the index file match the values in the response header lines shown above. Second, it also checks that the file content that it receives (the response body) has the same correct length and checksum values. So if your web server is not working correctly, these checks will not pass, and your client will crash.\u003c/p\u003e\n\u003ch2 id=\"requirements\"\u003eSolution Requirements\u003c/h2\u003e\n\u003cp\u003eYou are required to use \u003cstrong\u003econdition variables\u003c/strong\u003e for synchronization. \u003cem\u003eIf your implementation performs any busy-waiting (or spin-waiting), you will be heavily penalized.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eThe rest of the requirements are described earlier, when we described the \u003ca href=\"https://q.utoronto.ca/courses/238659/pages/lab-4-multi-threaded-web-server#multithreaded\" data-api-endpoint=\"https://q.utoronto.ca/api/v1/courses/238659/pages/lab-4-multi-threaded-web-server%23multithreaded\" data-api-returntype=\"Page\"\u003edesign of the multi-threaded web server\u003c/a\u003e.\u003c/p\u003e\n\u003ch2\u003eHints and Advice\u003c/h2\u003e\n\u003cp\u003eWe recommend understanding how the code that we gave you works. We provide the following files:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eserver.c:\u003c/strong\u003e Contains the main() function for the web server.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eserver_thread.c:\u003c/strong\u003e Currently, this file contains the main routine for serving web requests. This routine, invoked by the main server thread in the basic web server, calls various functions in \u003ckbd\u003erequest.c\u003c/kbd\u003e, described below. \u003cstrong\u003eThis is the only file that you should modify for this lab.\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003erequest.c:\u003c/strong\u003e Performs most of the work for handling HTTP requests, including reading requests from a connection, and sending the response back. All procedures in this file begin with the string “request”.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ecommon.c:\u003c/strong\u003e Contains wrapper functions for the system calls invoked by the various programs.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eclient.c:\u003c/strong\u003e Contains the main() function and the support routines for our stylized web client.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eclient_simple.c:\u003c/strong\u003e Contains the main() function and the support routines for a simple web client that requests a single file.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003efileset.c:\u003c/strong\u003e Contains the code for generating the file set.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe best way to learn about the code is to compile it and run it. Run the server we gave you with your preferred web browser or with the \u003ckbd\u003eclient_simple\u003c/kbd\u003e program that we have provided to you. Request a single file using the client code, and see the output of the server and the client. Make small changes to the server code (e.g., have it print out more debugging information) to see if you understand how it works.\u003c/p\u003e\n\u003cp\u003eWe anticipate that you will find the following routines useful for creating and synchronizing threads: \u003ckbd\u003epthread_create\u003c/kbd\u003e, \u003ckbd\u003epthread_mutex_init\u003c/kbd\u003e, \u003ckbd\u003epthread_mutex_lock\u003c/kbd\u003e, \u003ckbd\u003epthread_mutex_unlock\u003c/kbd\u003e,\u003ckbd\u003epthread_cond_init\u003c/kbd\u003e, \u003ckbd\u003epthread_cond_wait\u003c/kbd\u003e, and \u003ckbd\u003epthread_cond_signal\u003c/kbd\u003e. To find information on these library routines, read their manuals on the web.\u003c/p\u003e\n\u003cp\u003eYou are encouraged to reuse \u003ci\u003eyour own\u003c/i\u003e code that you might have developed in the previous labs or in previous courses to handle things such as queues, hashing, etc.\u003c/p\u003e\n\u003cp\u003eFeel free to consult the instructor's notes on the solutions to the producer-consumer problem.\u003c/p\u003e\n\u003ch2\u003eNote on Security\u003c/h2\u003e\n\u003cp\u003eIt is important to be careful regarding security during this project. The server program that we have provided does not serve files that have absolute paths, or a \u003cstrong\u003e..\u003c/strong\u003e in the file name. Both would allow others to explore any files in your home directory to which you have access (and they normally don't). We also disallow serving “.c” and “.h” source files. Where are these checks implemented? Even so, it will be a good idea to avoid running your server for a long time.\u003c/p\u003e\n\u003ch2\u003eFrequently Asked Questions\u003c/h2\u003e\n\u003cp\u003eWe have provided answers to various \u003ca title=\"FAQ: Lab 4\" href=\"https://q.utoronto.ca/courses/238659/pages/faq-lab-4\" data-api-endpoint=\"https://q.utoronto.ca/api/v1/courses/238659/pages/faq-lab-4\" data-api-returntype=\"Page\"\u003efrequently asked questions (FAQ)\u003c/a\u003e about the lab. Make sure to go over them. We have provided answers to many questions that students have asked in previous years, so you will save time by going over these answers as you start working on the lab.\u003c/p\u003e\n\u003ch2\u003eTesting Your Code\u003c/h2\u003e\n\u003cp\u003eTo help you test your code better, we have provided several scripts, as described below.\u003c/p\u003e\n\u003cdl\u003e\n\u003cdt\u003e\u003cstrong\u003erun-one-experiment:\u003c/strong\u003e\u003c/dt\u003e\n\u003cdd\u003eThis script runs the \u003ckbd\u003eserver\u003c/kbd\u003e program, and then it runs the \u003ckbd\u003eclient\u003c/kbd\u003e program 5 times, and provides the average and the standard deviations of the run times of the client. All the client run times are recorded in the \u003ckbd\u003erun.out\u003c/kbd\u003e file. Read the beginning of this file to see how it should be invoked. This script can take up to 1-2 minutes to run.\u003c/dd\u003e\n\u003cdt\u003e\u003cstrong\u003erun-experiment:\u003c/strong\u003e\u003c/dt\u003e\n\u003cdd\u003eThis script runs the \u003ckbd\u003erun-one-experiment\u003c/kbd\u003e script while varying various server parameters. Read the beginning of this file to see how it should be invoked. The script will generate two output files, \u003ckbd\u003eplot-threads.out\u003c/kbd\u003e and \u003ckbd\u003eplot-requests.out\u003c/kbd\u003e. These files contain the client run times when the number of threads and outstanding requests are varied for the server. This script can take 10-15 minutes to run, so use it when you are close to finishing the lab.\u003c/dd\u003e\n\u003cdt\u003e\u003cstrong\u003eplot-experiment:\u003c/strong\u003e\u003c/dt\u003e\n\u003cdd\u003eThis script plots the output files generated by \u003ckbd\u003erun-experiment\u003c/kbd\u003e. The plots are available in \u003ckbd\u003eplot-threads.pdf\u003c/kbd\u003e and \u003ckbd\u003eplot-requests.pdf\u003c/kbd\u003e. These plots will show you how the performance of your server changes with different number of threads and requests. Think about what you expect your server performance to be as you vary these server parameters, and whether these plots match your expectations. If you are running these scripts from a remote machine, then you will need to download the PDF files to view them on your machine.\u003c/dd\u003e\n\u003c/dl\u003e\n\u003cp\u003eYou can test your entire code by using our auto-tester program at any time by following the \u003ca title=\"Testing your lab code\" href=\"https://q.utoronto.ca/courses/238659/pages/testing-your-lab-code\" data-api-endpoint=\"https://q.utoronto.ca/api/v1/courses/238659/pages/testing-your-lab-code\" data-api-returntype=\"Page\"\u003etesting instructions\u003c/a\u003e. For this assignment, the auto-tester program runs the \u003ckbd\u003erun-experiment\u003c/kbd\u003e and the \u003ckbd\u003eplot-experiment\u003c/kbd\u003e scripts. Then it estimates whether the performance of your server matches our expectations and provides you marks appropriately.\u003c/p\u003e\n\u003cp\u003eSometimes when you run the server on a loaded machine, e.g., when others are also testing their programs, then your performance numbers will vary and the tester may give lower marks than you expect. It will be best to run these experiments on lightly-loaded machines. You can see the load on a machine by looking for \u003ckbd\u003eload average\u003c/kbd\u003e in the output of the \u003ckbd\u003etop\u003c/kbd\u003e program. A lightly-loaded machine will have a \u003ckbd\u003eload average\u003c/kbd\u003e close to 0. A heavily-loaded machine will have a \u003ckbd\u003eload average\u003c/kbd\u003e that close to 1 or higher. The \u003ckbd\u003eload average\u003c/kbd\u003e will go up after you start running your experiment. It may also go up because others start running their experiments.\u003c/p\u003e\n\u003cp\u003eWe will ensure that when we perform the marking then your code will be run on a lightly loaded machine.\u003c/p\u003e\n\u003ch2 id=\"using-git\"\u003eUsing Git\u003c/h2\u003e\n\u003cp\u003eYou should only modify the following files in this lab.\u003c/p\u003e\n\u003cpre\u003e  server_thread.c\n\u003c/pre\u003e\n\u003cp\u003eYou can find the files you have modified by running the \u003ckbd\u003egit status\u003c/kbd\u003e command.\u003c/p\u003e\n\u003cp\u003eYou can commit your modified files to your local repository as follows:\u003c/p\u003e\n\u003cpre\u003e  git add server_thread.c\n  git commit -m \"Committing changes for Lab 4\"\n\u003c/pre\u003e\n\u003cp\u003eWe suggest committing your changes frequently by rerunning the commands above (with different meaningful messages to the commit command), so that you can go back to see the changes you have made over time, if needed.\u003c/p\u003e\n\u003cp\u003eOnce you have tested your code, \u003cstrong\u003eand committed it\u003c/strong\u003e (check that by running \u003ckbd\u003egit status\u003c/kbd\u003e), you can tag the assignment as done.\u003c/p\u003e\n\u003cpre\u003egit tag Lab4-end\n\u003c/pre\u003e\n\u003cp\u003eThis tag names the last commit, and you can see that using the \u003ckbd\u003egit log\u003c/kbd\u003e or the \u003ckbd\u003egit show\u003c/kbd\u003e commands.\u003c/p\u003e\n\u003cp\u003eIf you want to see all the changes you have made in this lab, you can run the following \u003ckbd\u003egit diff\u003c/kbd\u003e command.\u003c/p\u003e\n\u003cpre\u003egit diff Lab4-start Lab4-end\n\u003c/pre\u003e\n\u003cp\u003eMore information for using the various git commands is available in the \u003ca href=\"https://q.utoronto.ca/courses/238659/pages/lab-1-review-of-c-data-structures-using-system-calls#git\" data-api-endpoint=\"https://q.utoronto.ca/api/v1/courses/238659/pages/lab-1-review-of-c-data-structures-using-system-calls%23git\" data-api-returntype=\"Page\"\u003eLab 1 instructions\u003c/a\u003e.\u003c/p\u003e\n\u003ch2\u003eCode Submission\u003c/h2\u003e\n\u003cp\u003eMake sure to add the \u003ckbd\u003eLab4-end\u003c/kbd\u003e tag to your local repository as described above. Then run the following command to update your remote repository:\u003c/p\u003e\n\u003cpre\u003egit push\ngit push --tags\n\u003c/pre\u003e\n\u003cp\u003eFor more details regarding code submission, please follow the \u003ca title=\"Submitting Lab Code\" href=\"https://q.utoronto.ca/courses/238659/pages/submitting-lab-code\" data-api-endpoint=\"https://q.utoronto.ca/api/v1/courses/238659/pages/submitting-lab-code\" data-api-returntype=\"Page\"\u003elab submission instructions\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003ePlease also make sure to test whether your submission succeeded by simulating our \u003ca title=\"Testing your lab code\" href=\"https://q.utoronto.ca/courses/238659/pages/testing-your-lab-code\" data-api-endpoint=\"https://q.utoronto.ca/api/v1/courses/238659/pages/testing-your-lab-code\" data-api-returntype=\"Page\"\u003eautomated marker\u003c/a\u003e.\u003c/p\u003e"},"WIKI_PAGE_REVISION":"2","WIKI_PAGE_SHOW_PATH":"/courses/238659/pages/lab-4-multi-threaded-web-server","WIKI_PAGE_EDIT_PATH":"/courses/238659/pages/lab-4-multi-threaded-web-server/edit","WIKI_PAGE_HISTORY_PATH":"/courses/238659/pages/lab-4-multi-threaded-web-server/revisions","COURSE_ID":"238659","MODULES_PATH":"/courses/238659/modules","wiki_page_menu_tools":[],"wiki_index_menu_tools":[],"DISPLAY_SHOW_ALL_LINK":false,"CAN_SET_TODO_DATE":false,"TITLE_AVAILABILITY_PATH":"/api/v1/courses/238659/page_title_availability","badge_counts":{"submissions":0},"notices":[],"active_context_tab":"pages"};
    BRANDABLE_CSS_HANDLEBARS_INDEX = [["new_styles_normal_contrast","new_styles_high_contrast","new_styles_normal_contrast_rtl","new_styles_high_contrast_rtl"],{"10":["8300658022",0,"250b5824c2",2],"15":["fc26aa5fd4",0,"f904416063",2],"19":["df5777ed9c"],"61":["f3934dab06","f405852bb2","ee5810890b","3fd9943b9a"],"67":["8b57f54e71",0,"43833dde85",2],"71":["35b89b103a","4304be7d41","58dbfc2651","2932678b1c"],"06":["cb9f63cba6",0,"2be010fc14",2],"f0":["7c947dce20",0,0,0],"c8":["12d5e4d1e8","9f7b02d283","4ebd280f3e","b547456f4c"],"1e":["02e336724a","d7bb142b0a","d7ac7fdfb8","c03b9b261e"],"b3":["8ebc71ebc3","cf8efa05c8","4efdc93a21","fd6d3a9780"],"0c":["c26e82abac",0,"b71e9cbd6d",2],"da":["efb9fe6d7c","edbd1b5e83","a6dc56afb7","dfb2d13098"],"1d":["a3bfcb7961",0,"90682b3bbe",2],"08":["64bff5a97d"],"e2":["11429f119a"],"9f":["35936a18c3",0,0,0],"2b":["abf63f48ef","bf8e135ffe","378e0c136b","9833e305e6"],"2c":["6d919206cd",0,0,0],"c2":["6f2721ae01"],"9c":["ecafc938e4",0,"59e7c22304",2],"c5":["ebf0e1382f","7f587d9a8a","afbdabf23d","0d398196a8"],"f2":["51574f9b13"]}]
;
  </script>

  <link rel="preload" href="https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/0976b3638d0604c8fdc3c2118e22f3cf/variables-7dd4b80918af0e0218ec0229e4bd5873.js" as="script" type="text/javascript"><link rel="preload" href="https://du11hjcvx0uqb.cloudfront.net/dist/timezone/America/New_York-692f7d27e4.js" as="script" type="text/javascript"><link rel="preload" href="https://du11hjcvx0uqb.cloudfront.net/dist/timezone/America/New_York-692f7d27e4.js" as="script" type="text/javascript"><link rel="preload" href="https://du11hjcvx0uqb.cloudfront.net/dist/timezone/en_CA-21c9309bc0.js" as="script" type="text/javascript"><link rel="preload" href="https://du11hjcvx0uqb.cloudfront.net/dist/webpack-production/moment/locale/en-ca-c-67f48e9f2d.js" as="script" type="text/javascript"><link rel="preload" href="https://du11hjcvx0uqb.cloudfront.net/dist/webpack-production/main-e-4723ea22a5.js" as="script" type="text/javascript" crossorigin="anonymous"><script>
//<![CDATA[

      ;["https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/0976b3638d0604c8fdc3c2118e22f3cf/variables-7dd4b80918af0e0218ec0229e4bd5873.js", "https://du11hjcvx0uqb.cloudfront.net/dist/timezone/America/New_York-692f7d27e4.js", "https://du11hjcvx0uqb.cloudfront.net/dist/timezone/America/New_York-692f7d27e4.js", "https://du11hjcvx0uqb.cloudfront.net/dist/timezone/en_CA-21c9309bc0.js", "https://du11hjcvx0uqb.cloudfront.net/dist/webpack-production/moment/locale/en-ca-c-67f48e9f2d.js"].forEach(function(src) {
        var s = document.createElement('script'); s.src = src; s.async = false;
        document.head.appendChild(s)
      });
//]]>
</script><script>
//<![CDATA[

      ;["https://du11hjcvx0uqb.cloudfront.net/dist/webpack-production/main-e-4723ea22a5.js"].forEach(function(src) {
        var s = document.createElement('script'); s.src = src; s.async = false; s.crossOrigin = 'anonymous';
        document.head.appendChild(s)
      });
//]]>
</script><link rel="preload" href="https://du11hjcvx0uqb.cloudfront.net/dist/webpack-production/wiki_page_show-c-4bd34300a3.js" as="script" type="text/javascript"><link rel="preload" href="https://du11hjcvx0uqb.cloudfront.net/dist/webpack-production/navigation_header-c-db122ba197.js" as="script" type="text/javascript"><script>
//<![CDATA[
(window.bundles || (window.bundles = [])).push('wiki_page_show');
(window.bundles || (window.bundles = [])).push('navigation_header');
//]]>
</script>
  <title>Lab 4: Multi-threaded Web server: ECE344H1 F LEC0101 20219:Operating Systems</title>




</head>

<body class="with-left-side course-menu-expanded padless-content pages primary-nav-expanded full-width context-course_238659 responsive_student_grades_page">

<noscript>
  <div role="alert" class="ic-flash-static ic-flash-error">
    <div class="ic-flash__icon" aria-hidden="true">
      <i class="icon-warning"></i>
    </div>
    <h1>You need to have JavaScript enabled in order to access this site.</h1>
  </div>
</noscript>




<div id="flash_message_holder"></div>
<div id="flash_screenreader_holder"></div>

<div id="application" class="ic-app">
  



<header id="mobile-header" class="no-print">
  <button type="button" class="Button Button--icon-action-rev Button--large mobile-header-hamburger">
    <i class="icon-solid icon-hamburger"></i>
    <span id="mobileHeaderInboxUnreadBadge" class="menu-item__badge" style="min-width: 0; top: 12px; height: 12px; right: 6px; display:none;"></span>
    <span class="screenreader-only">Dashboard</span>
  </button>
  <div class="mobile-header-space"></div>
    <a class="mobile-header-title expandable" href="/courses/238659" role="button" aria-controls="mobileContextNavContainer">
      <div>ECE344H1 F LEC0101</div>
        <div>Lab 4: Multi-threaded Web server</div>
    </a>
    <div id="immersive_reader_mobile_mount_point"></div>
    <div class="mobile-header-space"></div>
    <button type="button" class="Button Button--icon-action-rev Button--large mobile-header-arrow" aria-label="Navigation Menu">
      <i class="icon-arrow-open-down" id="mobileHeaderArrowIcon"></i>
    </button>
</header>
<nav id="mobileContextNavContainer"></nav>

<header id="header" class="ic-app-header no-print ">
  <a href="#content" id="skip_navigation_link">Skip To Content</a>
  <div role="region" class="ic-app-header__main-navigation" aria-label="Global Navigation">
      <div class="ic-app-header__logomark-container">
        <a href="https://q.utoronto.ca/" class="ic-app-header__logomark">
          <span class="screenreader-only">Dashboard</span>
        </a>
      </div>
    <ul id="menu" class="ic-app-header__menu-list">
        <li class="menu-item ic-app-header__menu-list-item ">
          <a id="global_nav_profile_link" role="button" href="/profile/settings" class="ic-app-header__menu-list-link">
            <div class="menu-item-icon-container">
              <div aria-hidden="true" class="fs-exclude ic-avatar ">
                <img src="https://q.utoronto.ca/images/thumbnails/24252802/49w46JOhPyJJXYU3xUiBG9eUG1LciFpubMN3YR4t" alt="Yuhe Chen" />
              </div>
              <span class="menu-item__badge"></span>
            </div>
            <div class="menu-item__text">
              Account
            </div>
          </a>
        </li>
      <li class="ic-app-header__menu-list-item ">
        <a id="global_nav_dashboard_link" href="https://q.utoronto.ca/" class="ic-app-header__menu-list-link">
          <div class="menu-item-icon-container" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" class="ic-icon-svg ic-icon-svg--dashboard" version="1.1" x="0" y="0" viewBox="0 0 280 200" enable-background="new 0 0 280 200" xml:space="preserve"><path d="M273.09,180.75H197.47V164.47h62.62A122.16,122.16,0,1,0,17.85,142a124,124,0,0,0,2,22.51H90.18v16.29H6.89l-1.5-6.22A138.51,138.51,0,0,1,1.57,142C1.57,65.64,63.67,3.53,140,3.53S278.43,65.64,278.43,142a137.67,137.67,0,0,1-3.84,32.57ZM66.49,87.63,50.24,71.38,61.75,59.86,78,76.12Zm147,0L202,76.12l16.25-16.25,11.51,11.51ZM131.85,53.82v-23h16.29v23Zm15.63,142.3a31.71,31.71,0,0,1-28-16.81c-6.4-12.08-15.73-72.29-17.54-84.25a8.15,8.15,0,0,1,13.58-7.2c8.88,8.21,53.48,49.72,59.88,61.81a31.61,31.61,0,0,1-27.9,46.45ZM121.81,116.2c4.17,24.56,9.23,50.21,12,55.49A15.35,15.35,0,1,0,161,157.3C158.18,152,139.79,133.44,121.81,116.2Z" /></svg>

          </div>
          <div class="menu-item__text">
            Dashboard
          </div>
        </a>
      </li>
        <li class="menu-item ic-app-header__menu-list-item ic-app-header__menu-list-item--active">
          <a id="global_nav_courses_link" role="button" href="/courses" class="ic-app-header__menu-list-link">
            <div class="menu-item-icon-container" aria-hidden="true">
              <svg xmlns="http://www.w3.org/2000/svg" class="ic-icon-svg ic-icon-svg--courses" version="1.1" x="0" y="0" viewBox="0 0 280 259" enable-background="new 0 0 280 259" xml:space="preserve"><path d="M73.31,198c-11.93,0-22.22,8-24,18.73a26.67,26.67,0,0,0-.3,3.63v.3a22,22,0,0,0,5.44,14.65,22.47,22.47,0,0,0,17.22,8H200V228.19h-134V213.08H200V198Zm21-105.74h90.64V62H94.3ZM79.19,107.34V46.92H200v60.42Zm7.55,30.21V122.45H192.49v15.11ZM71.65,16.71A22.72,22.72,0,0,0,49,39.36V190.88a41.12,41.12,0,0,1,24.32-8h157V16.71ZM33.88,39.36A37.78,37.78,0,0,1,71.65,1.6H245.36V198H215.15v45.32h22.66V258.4H71.65a37.85,37.85,0,0,1-37.76-37.76Z"/></svg>

            </div>
            <div class="menu-item__text">
              Courses
            </div>
          </a>
        </li>
        <li class="menu-item ic-app-header__menu-list-item ">
          <a id="global_nav_groups_link" role="button" href="/groups" class="ic-app-header__menu-list-link">
            <div class="menu-item-icon-container" aria-hidden="true">
              <svg xmlns="http://www.w3.org/2000/svg" class="ic-icon-svg ic-icon-svg--groups" viewBox="0 0 200 135"><path d="M134.5 129.4c0-1.1 0-19.8-6.2-31.1-4.5-8.5-16.4-12.4-35-19.2-1.7-.6-3.4-1.1-5.1-1.7v-8.5c5.6-5.1 8.5-12.4 8.5-20.3V29.4C96.6 13 83.6 0 67.2 0S37.9 13 37.9 29.4v19.2c0 7.3 3.4 14.7 8.5 20.3v8.5c-1.7.6-3.4 1.1-5.1 1.7-18.6 6.2-30.5 10.7-35 19.2C0 109.6 0 128.8 0 129.4c0 3.4 2.3 5.6 5.6 5.6h123.7c3.5 0 5.7-2.3 5.2-5.6zm-123.2-5.7c.6-5.6 1.7-14.7 3.4-19.8C17 98.8 30 94.3 43.5 89.8c2.8-1.1 5.6-2.3 9-3.4 2.3-.6 4-2.8 4-5.1V66.7c0-1.7-.6-3.4-1.7-4.5-4-3.4-6.2-8.5-6.2-13.6V29.4c0-10.2 7.9-18.1 18.1-18.1s18.1 7.9 18.1 18.1v19.2c0 5.1-2.3 10.2-6.2 13.6-1.1 1.1-1.7 2.8-1.7 4.5v14.7c0 2.3 1.7 4.5 4 5.1 2.8 1.1 6.2 2.3 9 3.4 13.6 5.1 26.6 9.6 28.8 14.1 2.8 5.1 4 13.6 4.5 19.8H11.3zM196 79.1c-2.8-6.2-11.3-9.6-22.6-13.6l-1.7-.6v-3.4c4.5-4 6.8-9.6 6.8-15.8V35c0-12.4-9.6-22-22-22s-22 10.2-22 22v10.7c0 6.2 2.3 11.9 6.8 15.8V65l-1.7.6c-7.3 2.8-13 4.5-16.9 7.3-1.7 1.1-2.3 2.8-2.3 5.1.6 1.7 1.7 3.4 3.4 4.5 7.9 4 12.4 7.3 14.1 10.7 2.3 4.5 4 10.2 5.1 18.1.6 2.3 2.8 4.5 5.6 4.5h45.8c3.4 0 5.6-2.8 5.6-5.1 0-3.9 0-24.3-4-31.6zm-42.9 25.4c-1.1-6.8-2.8-12.4-5.1-16.9-1.7-4-5.1-6.8-9.6-10.2 1.7-1.1 3.4-1.7 5.1-2.3l5.6-2.3c1.7-.6 3.4-2.8 3.4-5.1v-9.6c0-1.7-.6-3.4-2.3-4.5-2.8-1.7-4.5-5.1-4.5-8.5V34.5c0-6.2 4.5-10.7 10.7-10.7s10.7 5.1 10.7 10.7v10.7c0 3.4-1.7 6.2-4.5 8.5-1.1 1.1-2.3 2.8-2.3 4.5v10.2c0 2.3 1.1 4.5 3.4 5.1l5.6 2.3c6.8 2.3 15.3 5.6 16.4 7.9 1.7 2.8 2.8 12.4 2.8 20.9h-35.4z"/></svg>

            </div>
            <div class="menu-item__text">
              Groups
            </div>
          </a>
        </li>
      <li class="menu-item ic-app-header__menu-list-item ">
        <a id="global_nav_calendar_link" href="/calendar" class="ic-app-header__menu-list-link">
          <div class="menu-item-icon-container" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" class="ic-icon-svg ic-icon-svg--calendar" version="1.1" x="0" y="0" viewBox="0 0 280 280" enable-background="new 0 0 280 280" xml:space="preserve"><path d="M197.07,213.38h16.31V197.07H197.07Zm-16.31,16.31V180.76h48.92v48.92Zm-48.92-16.31h16.31V197.07H131.85Zm-16.31,16.31V180.76h48.92v48.92ZM66.62,213.38H82.93V197.07H66.62ZM50.32,229.68V180.76H99.24v48.92Zm146.75-81.53h16.31V131.85H197.07Zm-16.31,16.31V115.54h48.92v48.92Zm-48.92-16.31h16.31V131.85H131.85Zm-16.31,16.31V115.54h48.92v48.92ZM66.62,148.15H82.93V131.85H66.62ZM50.32,164.46V115.54H99.24v48.92ZM34,262.29H246V82.93H34ZM246,66.62V42.16A8.17,8.17,0,0,0,237.84,34H213.38v8.15a8.15,8.15,0,1,1-16.31,0V34H82.93v8.15a8.15,8.15,0,0,1-16.31,0V34H42.16A8.17,8.17,0,0,0,34,42.16V66.62Zm-8.15-48.92a24.49,24.49,0,0,1,24.46,24.46V278.6H17.71V42.16A24.49,24.49,0,0,1,42.16,17.71H66.62V9.55a8.15,8.15,0,0,1,16.31,0v8.15H197.07V9.55a8.15,8.15,0,1,1,16.31,0v8.15Z"/></svg>

          </div>
          <div class="menu-item__text">
            Calendar
          </div>
        </a>
      </li>
      <li class="menu-item ic-app-header__menu-list-item ">
        <a id="global_nav_conversations_link" href="/conversations" class="ic-app-header__menu-list-link">
          <div class="menu-item-icon-container">
            <span aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="ic-icon-svg ic-icon-svg--inbox" version="1.1" x="0" y="0" viewBox="0 0 280 280" enable-background="new 0 0 280 280" xml:space="preserve"><path d="M91.72,120.75h96.56V104.65H91.72Zm0,48.28h80.47V152.94H91.72Zm0-96.56h80.47V56.37H91.72Zm160.94,34.88H228.52V10.78h-177v96.56H27.34A24.17,24.17,0,0,0,3.2,131.48V244.14a24.17,24.17,0,0,0,24.14,24.14H252.66a24.17,24.17,0,0,0,24.14-24.14V131.48A24.17,24.17,0,0,0,252.66,107.34Zm0,16.09a8.06,8.06,0,0,1,8,8v51.77l-32.19,19.31V123.44ZM67.58,203.91v-177H212.42v177ZM27.34,123.44H51.48v79.13L19.29,183.26V131.48A8.06,8.06,0,0,1,27.34,123.44ZM252.66,252.19H27.34a8.06,8.06,0,0,1-8-8V202l30,18H230.75l30-18v42.12A8.06,8.06,0,0,1,252.66,252.19Z"/></svg>
</span>
            <span class="menu-item__badge"></span>
          </div>
          <div class="menu-item__text">
            Inbox
          </div>
        </a>
      </li>
        <li class="menu-item ic-app-header__menu-list-item" >
          <a id="global_nav_history_link" role="button" href="#" class="ic-app-header__menu-list-link">
            <div class="menu-item-icon-container" aria-hidden="true">
              <svg viewBox="0 0 1920 1920" class="ic-icon-svg menu-item__icon svg-icon-history" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <path d="M960 112.941c-467.125 0-847.059 379.934-847.059 847.059 0 467.125 379.934 847.059 847.059 847.059 467.125 0 847.059-379.934 847.059-847.059 0-467.125-379.934-847.059-847.059-847.059M960 1920C430.645 1920 0 1489.355 0 960S430.645 0 960 0s960 430.645 960 960-430.645 960-960 960m417.905-575.955L903.552 988.28V395.34h112.941v536.47l429.177 321.77-67.765 90.465z" stroke="none" stroke-width="1" fill-rule="evenodd"/>
</svg>
            </div>
            <div class="menu-item__text">
              History
            </div>
          </a>
        </li>
        
    <li id="context_external_tool_2015_menu_item" class="globalNavExternalTool menu-item ic-app-header__menu-list-item">
      <a class='ic-app-header__menu-list-link' href="/accounts/1/external_tools/2015?launch_type=global_navigation">
          <img src="https://s3.amazonaws.com/canvas-utprd/Course_Evals.svg" alt="" />
        <div class="menu-item__text">
          Course Evals
        </div>
      </a>
    </li>

      <li class="ic-app-header__menu-list-item">
        <a id="global_nav_help_link" role="button" class="ic-app-header__menu-list-link" data-track-category="help system" data-track-label="help button" href="http://help.instructure.com/">
          <div class="menu-item-icon-container" role="presentation">
              <svg xmlns="http://www.w3.org/2000/svg" class="ic-icon-svg menu-item__icon svg-icon-help" version="1.1" x="0" y="0" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve" fill="currentColor"><path d="M100,127.88A11.15,11.15,0,1,0,111.16,139,11.16,11.16,0,0,0,100,127.88Zm8.82-88.08a33.19,33.19,0,0,1,23.5,23.5,33.54,33.54,0,0,1-24,41.23,3.4,3.4,0,0,0-2.74,3.15v9.06H94.42v-9.06a14.57,14.57,0,0,1,11.13-14,22.43,22.43,0,0,0,13.66-10.27,22.73,22.73,0,0,0,2.31-17.37A21.92,21.92,0,0,0,106,50.59a22.67,22.67,0,0,0-19.68,3.88,22.18,22.18,0,0,0-8.65,17.64H66.54a33.25,33.25,0,0,1,13-26.47A33.72,33.72,0,0,1,108.82,39.8ZM100,5.2A94.8,94.8,0,1,0,194.8,100,94.91,94.91,0,0,0,100,5.2m0,178.45A83.65,83.65,0,1,1,183.65,100,83.73,83.73,0,0,1,100,183.65" transform="translate(-5.2 -5.2)"/></svg>

            <span class="menu-item__badge"></span>
          </div>
          <div class="menu-item__text">
            Help
          </div>
</a>      </li>
    </ul>
  </div>
  <div class="ic-app-header__secondary-navigation">
    <ul class="ic-app-header__menu-list">
      <li class="menu-item ic-app-header__menu-list-item">
        <a
          id="primaryNavToggle"
          role="button"
          href="#"
          class="ic-app-header__menu-list-link ic-app-header__menu-list-link--nav-toggle"
          aria-label="Minimize global navigation"
          title="Minimize global navigation"
        >
          <div class="menu-item-icon-container" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" class="ic-icon-svg ic-icon-svg--navtoggle" version="1.1" x="0" y="0" width="40" height="32" viewBox="0 0 40 32" xml:space="preserve">
  <path d="M39.5,30.28V2.48H37.18v27.8Zm-4.93-13.9L22.17,4,20.53,5.61l9.61,9.61H.5v2.31H30.14l-9.61,9.61,1.64,1.64Z"/>
</svg>

          </div>
        </a>
      </li>
    </ul>
  </div>
  <div id="global_nav_tray_container"></div>
  <div id="global_nav_tour"></div>
</header>


  <div id="instructure_ajax_error_box">
    <div style="text-align: right; background-color: #fff;"><a href="#" class="close_instructure_ajax_error_box_link">Close</a></div>
    <iframe id="instructure_ajax_error_result" src="about:blank" style="border: 0;" title="Error"></iframe>
  </div>

  <div id="wrapper" class="ic-Layout-wrapper">
      <div class="ic-app-nav-toggle-and-crumbs no-print">
          <button type="button" id="courseMenuToggle" class="Button Button--link ic-app-course-nav-toggle" aria-live="polite" aria-label="Hide Courses Navigation Menu">
            <i class="icon-hamburger" aria-hidden="true"></i>
          </button>

        <div class="ic-app-crumbs">
            <nav id="breadcrumbs" role="navigation" aria-label="breadcrumbs"><ul><li class="home"><a href="/"><span class="ellipsible"><i class="icon-home"
   title="My Dashboard">
  <span class="screenreader-only">My Dashboard</span>
</i>
</span></a></li><li><a href="/courses/238659"><span class="ellipsible">ECE344H1 F LEC0101</span></a></li><li><a href="/courses/238659/pages"><span class="ellipsible">Pages</span></a></li><li><span class="ellipsible">Lab 4: Multi-threaded Web server</span></li></ul></nav>
        </div>


        <div class="right-of-crumbs">
            <div class="TutorialToggleHolder"></div>
            <div id="immersive_reader_mount_point"></div>
        </div>

      </div>
    <div id="main" class="ic-Layout-columns">
        <div class="ic-Layout-watermark"></div>
        <div id="left-side"
          class="ic-app-course-menu ic-sticky-on list-view"
          style="display: block"
          >
          <div id="sticky-container" class="ic-sticky-frame">
              <span id="section-tabs-header-subtitle" class="ellipsis">2021 Fall</span>
            <nav role="navigation" aria-label="Courses Navigation Menu"><ul id="section-tabs"><li class="section"><a href="/courses/238659" class="home">Home</a></li><li class="section"><a href="/courses/238659/announcements" class="announcements">Announcements</a></li><li class="section"><a href="/courses/238659/grades" class="grades">Grades</a></li><li class="section"><a href="/courses/238659/quizzes" class="quizzes">Quizzes</a></li></ul></nav>
          </div>
        </div>
      <div id="not_right_side" class="ic-app-main-content">
        <div id="content-wrapper" class="ic-Layout-contentWrapper">
          
          <div id="content" class="ic-Layout-contentMain" role="main">
            

  

<div id="wiki_page_show"></div>
<div id="module_navigation_target"></div>

          </div>
        </div>
        <div id="right-side-wrapper" class="ic-app-main-content__secondary">
          <aside id="right-side" role="complementary">
            
          </aside>
        </div>
      </div>
    </div>
  </div>



    <div style="display:none;"><!-- Everything inside of this should always stay hidden -->
        <div id="page_view_id">12edccdb-808e-4cd6-a7b1-97ae3f8b1593</div>
    </div>
  <div id='aria_alerts' class='hide-text affix' role="alert" aria-live="assertive"></div>
  <div id='StudentTray__Container'></div>
    <div class="NewUserTutorialTray__Container"></div>
  <div id="react-router-portals"></div>
  

  <iframe src="https://sso.canvaslms.com/post_message_forwarding" name="post_message_forwarding" title="post_message_forwarding" id="post_message_forwarding" sandbox="allow-scripts allow-same-origin" style="display:none;"></iframe>


  <script>
    Object.assign(
      ENV,
      {}
    )
  </script>

<link rel="preload" href="https://du11hjcvx0uqb.cloudfront.net/dist/webpack-production/inst_fs_service_worker-c-7146c1678a.js" as="script" type="text/javascript"><script>
//<![CDATA[
(window.bundles || (window.bundles = [])).push('inst_fs_service_worker');
//]]>
</script>
  <script>
//<![CDATA[

      ;["https://instructure-uploads-yul.s3.ca-central-1.amazonaws.com/account_118340000000000001/attachments/24721051/UT_CustomJS_20210412-PRD-GTM.js"].forEach(function(src) {
        var s = document.createElement('script'); s.src = src; s.async = false;
        document.head.appendChild(s)
      });
//]]>
</script>

</div> <!-- #application -->
</body>
</html>
